model Product {
    id String @id @default(cuid())

    created_at DateTime  @default(now())
    updated_at DateTime? @updatedAt

    name        String
    description String?
    image_url   String
    price       Float
    shop        Shop        @relation(fields: [shop_id], references: [id])
    shop_id     String
    order_items OrderItem[]

    is_available Boolean @default(true)

    categories ProductCategory[]
    options    ProductOption[]

    @@index([name])
    @@index([shop_id])
    @@map("products")
}

model ProductOption {
    id               String  @id @default(cuid())
    option           String
    additional_price Float   @default(0)
    product          Product @relation(fields: [product_id], references: [id])
    product_id       String

    @@unique([option, product_id])
    @@map("product_options")
}

model Category {
    id        Int               @id @default(autoincrement())
    name      String            @unique
    slug      String            @unique
    image_url String
    products  ProductCategory[]

    @@map("categories")
}

model ProductCategory {
    product    Product @relation(fields: [product_id], references: [id])
    product_id String

    category    Category @relation(fields: [category_id], references: [id])
    category_id Int

    @@id([product_id, category_id])
    @@index([category_id])
    @@index([product_id])
    @@map("product_categories")
}
