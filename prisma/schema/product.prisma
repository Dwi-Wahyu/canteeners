model Product {
    id String @id @default(cuid())

    created_at DateTime  @default(now())
    updated_at DateTime? @updatedAt

    name        String
    description String?
    image_url   String
    price       Float
    cost        Float?
    shop        Shop    @relation(fields: [shop_id], references: [id])
    shop_id     String

    order_items OrderItem[]
    cart_items  CartItem[]

    is_available Boolean @default(true)

    categories ProductCategory[]

    @@index([name])
    @@index([shop_id])
    @@map("products")
}

model Category {
    id        Int               @id @default(autoincrement())
    name      String            @unique
    slug      String            @unique
    image_url String
    products  ProductCategory[]

    @@map("categories")
}

model ProductCategory {
    product    Product @relation(fields: [product_id], references: [id])
    product_id String

    category    Category @relation(fields: [category_id], references: [id])
    category_id Int

    @@id([product_id, category_id])
    @@index([category_id])
    @@index([product_id])
    @@map("product_categories")
}
