model User {
    id         String   @id @default(uuid())
    created_at DateTime @default(now())
    updated_at DateTime @updatedAt

    name       String
    username   String    @unique
    password   String
    avatar     String    @default("default-avatar.jpg")
    last_login DateTime?
    role       Role

    email        String?
    phone_number String?

    shop_owned Shop?

    messages Message[]

    quick_chats QuickChat[]

    conversations ConversationParticipant[]

    customer_violations CustomerViolation[]
    customer_orders     Order[]
    customer_cart       Cart?
    customer_profile    CustomerProfile?

    @@index([role])
    @@index([last_login])
    @@map("users")
}

// todo: nanti untuk kurir bikin model profil terpisah isinya is_online, lat, lng, dan delivery

enum Role {
    ADMIN
    CUSTOMER
    SHOP_OWNER
    COURIER
}

model CustomerProfile {
    id String @id @default(uuid())

    user         User   @relation(fields: [user_id], references: [id])
    user_id      String @unique
    canteen_id   Int?
    floor        Int?
    table_number Int?

    suspend_until  DateTime?
    suspend_reason String?

    last_visit_at DateTime?

    @@map("customer_profiles")
}
